<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Analytics Tracker</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; padding: 0; font-family: system-ui, -apple-system, sans-serif; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Initialize Supabase
        const supabaseUrl = 'https://jlincotqdbeobpmolyzi.supabase.co';
        const supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpsaW5jb3RxZGJlb2JwbW9seXppIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA5NDY0MjIsImV4cCI6MjA4NjUyMjQyMn0.__1YaIkjMseV2BN_s94M6hJ_jXiN50Ca6fe_NcsvdVY';
        const supabase = window.supabase.createClient(supabaseUrl, supabaseAnonKey);

        function App() {
            const [session, setSession] = useState(null);
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                // Check for existing session
                supabase.auth.getSession().then(({ data: { session } }) => {
                    setSession(session);
                    setLoading(false);
                });

                // Listen for auth changes
                const {
                    data: { subscription },
                } = supabase.auth.onAuthStateChange((_event, session) => {
                    setSession(session);
                });

                return () => subscription.unsubscribe();
            }, []);

            if (loading) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 flex items-center justify-center">
                        <div className="text-center">
                            <div className="animate-spin rounded-full h-16 w-16 border-b-4 border-purple-500 mx-auto mb-4"></div>
                            <p className="text-gray-600 text-lg">Loading...</p>
                        </div>
                    </div>
                );
            }

            if (!session) {
                return <Auth />;
            }

            return <Dashboard session={session} />;
        }

        function Auth() {
            const [isLogin, setIsLogin] = useState(true);
            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const [loading, setLoading] = useState(false);
            const [message, setMessage] = useState('');

            const handleAuth = async (e) => {
                e.preventDefault();
                setLoading(true);
                setMessage('');

                try {
                    if (isLogin) {
                        const { data, error } = await supabase.auth.signInWithPassword({
                            email,
                            password,
                        });
                        if (error) throw error;
                        setMessage('Login successful!');
                    } else {
                        const { data, error } = await supabase.auth.signUp({
                            email,
                            password,
                        });
                        if (error) throw error;
                        setMessage('Account created! Check your email to confirm.');
                    }
                } catch (error) {
                    setMessage(error.message);
                }
                setLoading(false);
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 flex items-center justify-center p-4">
                    <div className="bg-white rounded-2xl shadow-xl p-8 w-full max-w-md">
                        <div className="text-center mb-8">
                            <div className="bg-gradient-to-r from-purple-500 to-pink-500 w-16 h-16 rounded-xl flex items-center justify-center mx-auto mb-4">
                                <span className="text-white text-3xl">üìä</span>
                            </div>
                            <h1 className="text-2xl font-bold text-gray-800">Social Analytics Tracker</h1>
                            <p className="text-gray-500 mt-2">
                                {isLogin ? 'Welcome back!' : 'Create your account'}
                            </p>
                        </div>

                        <form onSubmit={handleAuth} className="space-y-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                <input
                                    type="email"
                                    value={email}
                                    onChange={(e) => setEmail(e.target.value)}
                                    required
                                    className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-purple-400 outline-none"
                                    placeholder="you@example.com"
                                />
                            </div>

                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">Password</label>
                                <input
                                    type="password"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    required
                                    className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-purple-400 outline-none"
                                    placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                                />
                            </div>

                            {message && (
                                <div className={`p-3 rounded-lg text-sm ${
                                    message.includes('successful') || message.includes('created')
                                        ? 'bg-green-50 text-green-700'
                                        : 'bg-red-50 text-red-700'
                                }`}>
                                    {message}
                                </div>
                            )}

                            <button
                                type="submit"
                                disabled={loading}
                                className="w-full px-4 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-medium hover:opacity-90 transition disabled:opacity-50"
                            >
                                {loading ? 'Loading...' : isLogin ? 'Sign In' : 'Sign Up'}
                            </button>
                        </form>

                        <div className="mt-6 text-center">
                            <button
                                onClick={() => {
                                    setIsLogin(!isLogin);
                                    setMessage('');
                                }}
                                className="text-purple-600 hover:text-purple-700 text-sm font-medium"
                            >
                                {isLogin ? "Don't have an account? Sign up" : 'Already have an account? Sign in'}
                            </button>
                        </div>

                        <div className="mt-6 p-4 bg-blue-50 rounded-lg">
                            <p className="text-xs text-blue-800">
                                <strong>üí° Team Setup:</strong> Create one account and share the login with your team. 
                                Everyone will see the same data in real-time!
                            </p>
                        </div>
                    </div>
                </div>
            );
        }

        function Dashboard({ session }) {
            const [posts, setPosts] = useState([]);
            const [aiSuggestions, setAiSuggestions] = useState([]);
            const [loadingSuggestions, setLoadingSuggestions] = useState(false);
            const [showAddPost, setShowAddPost] = useState(false);
            const [loading, setLoading] = useState(true);
            const [newPost, setNewPost] = useState({
                platform: 'instagram',
                title: '',
                url: '',
                hashtags: '',
                views: '',
                likes: '',
                comments: '',
                shares: ''
            });

            useEffect(() => {
                loadData();
                
                // Subscribe to real-time changes
                const postsChannel = supabase
                    .channel('posts-changes')
                    .on('postgres_changes', 
                        { event: '*', schema: 'public', table: 'posts' }, 
                        (payload) => {
                            console.log('Change received!', payload);
                            loadData();
                        }
                    )
                    .subscribe();

                return () => {
                    supabase.removeChannel(postsChannel);
                };
            }, []);

            const loadData = async () => {
                try {
                    // Load posts
                    const { data: postsData, error: postsError } = await supabase
                        .from('posts')
                        .select('*')
                        .order('created_at', { ascending: false });

                    if (postsError) throw postsError;

                    // Transform data
                    const transformedPosts = postsData?.map(post => ({
                        id: post.id,
                        platform: post.platform,
                        title: post.title,
                        url: post.url,
                        timestamp: post.timestamp,
                        metrics: {
                            views: post.views || 0,
                            likes: post.likes || 0,
                            comments: post.comments || 0,
                            shares: post.shares || 0
                        },
                        hashtags: post.hashtags || [],
                        source: 'manual'
                    })) || [];

                    setPosts(transformedPosts);

                    // Load AI suggestions
                    const { data: suggestionsData, error: suggestionsError } = await supabase
                        .from('ai_suggestions')
                        .select('*')
                        .order('created_at', { ascending: false })
                        .limit(5);

                    if (!suggestionsError && suggestionsData) {
                        setAiSuggestions(suggestionsData);
                    }
                } catch (error) {
                    console.error('Error loading data:', error);
                }
                setLoading(false);
            };

            const totalMetrics = posts.reduce((acc, post) => ({
                views: acc.views + (post.metrics.views || 0),
                likes: acc.likes + (post.metrics.likes || 0),
                comments: acc.comments + (post.metrics.comments || 0),
                shares: acc.shares + (post.metrics.shares || 0)
            }), { views: 0, likes: 0, comments: 0, shares: 0 });

            const avgEngagementRate = totalMetrics.views > 0
                ? ((totalMetrics.likes + totalMetrics.comments + totalMetrics.shares) / totalMetrics.views * 100).toFixed(2)
                : 0;

            const addNewPost = async () => {
                if (!newPost.title || !newPost.views) {
                    alert('Please enter at least a title and views!');
                    return;
                }

                try {
                    const postData = {
                        id: Date.now(),
                        user_email: session.user.email,
                        platform: newPost.platform,
                        title: newPost.title,
                        url: newPost.url,
                        timestamp: new Date().toISOString(),
                        views: parseInt(newPost.views) || 0,
                        likes: parseInt(newPost.likes) || 0,
                        comments: parseInt(newPost.comments) || 0,
                        shares: parseInt(newPost.shares) || 0,
                        hashtags: newPost.hashtags.split(',').map(h => h.trim()).filter(h => h)
                    };

                    const { error } = await supabase
                        .from('posts')
                        .insert([postData]);

                    if (error) throw error;

                    setNewPost({ 
                        platform: 'instagram', 
                        title: '', 
                        url: '', 
                        hashtags: '', 
                        views: '', 
                        likes: '', 
                        comments: '', 
                        shares: '' 
                    });
                    setShowAddPost(false);
                    
                    // Data will auto-reload via real-time subscription
                } catch (error) {
                    console.error('Error adding post:', error);
                    alert('Error adding post: ' + error.message);
                }
            };

            const deletePost = async (id) => {
                if (!confirm('Delete this post?')) return;

                try {
                    const { error } = await supabase
                        .from('posts')
                        .delete()
                        .eq('id', id);

                    if (error) throw error;
                    
                    // Data will auto-reload via real-time subscription
                } catch (error) {
                    console.error('Error deleting post:', error);
                    alert('Error deleting post: ' + error.message);
                }
            };

            const generateAISuggestions = async () => {
                if (posts.length === 0) {
                    alert('Add some posts first!');
                    return;
                }

                setLoadingSuggestions(true);

                try {
                    const response = await fetch("https://api.anthropic.com/v1/messages", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({
                            model: "claude-sonnet-4-20250514",
                            max_tokens: 1000,
                            messages: [{
                                role: "user",
                                content: `Analyze this social media data and give 5 suggestions to increase engagement. Return ONLY a JSON array: [{"category": "Content Strategy|Timing|Hashtags|Engagement|Format", "suggestion": "specific advice"}]

Posts: ${JSON.stringify(posts.map(p => ({ platform: p.platform, title: p.title, metrics: p.metrics })))}
Total Views: ${totalMetrics.views}, Avg Engagement: ${avgEngagementRate}%`
                            }]
                        })
                    });

                    const data = await response.json();
                    const text = data.content.find(item => item.type === "text")?.text || "";
                    const jsonMatch = text.match(/\[[\s\S]*\]/);

                    if (jsonMatch) {
                        const suggestions = JSON.parse(jsonMatch[0]);
                        
                        // Save to Supabase
                        const suggestionRecords = suggestions.map(s => ({
                            user_email: session.user.email,
                            category: s.category,
                            suggestion: s.suggestion
                        }));

                        // Delete old suggestions first
                        await supabase
                            .from('ai_suggestions')
                            .delete()
                            .eq('user_email', session.user.email);

                        // Insert new ones
                        const { error } = await supabase
                            .from('ai_suggestions')
                            .insert(suggestionRecords);

                        if (error) throw error;

                        setAiSuggestions(suggestions);
                    }
                } catch (error) {
                    console.error("AI error:", error);
                    alert('Error generating suggestions');
                }

                setLoadingSuggestions(false);
            };

            const handleSignOut = async () => {
                await supabase.auth.signOut();
            };

            if (loading) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 flex items-center justify-center">
                        <div className="text-center">
                            <div className="animate-spin rounded-full h-16 w-16 border-b-4 border-purple-500 mx-auto mb-4"></div>
                            <p className="text-gray-600 text-lg">Loading your analytics...</p>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-4">
                    <div className="max-w-7xl mx-auto">
                        {/* Header */}
                        <div className="bg-white rounded-2xl shadow-lg p-6 mb-6">
                            <div className="flex items-center justify-between mb-4">
                                <div className="flex items-center gap-3">
                                    <div className="bg-gradient-to-r from-purple-500 to-pink-500 p-3 rounded-xl">
                                        <span className="text-white text-2xl">üìä</span>
                                    </div>
                                    <div>
                                        <h1 className="text-2xl font-bold text-gray-800">Social Analytics Tracker</h1>
                                        <p className="text-sm text-gray-500 flex items-center gap-2">
                                            <span>üîÑ Real-time sync enabled</span>
                                            <span className="text-xs">‚Ä¢</span>
                                            <span className="text-xs">{session.user.email}</span>
                                        </p>
                                    </div>
                                </div>
                                <div className="flex gap-2">
                                    <button
                                        onClick={() => setShowAddPost(!showAddPost)}
                                        className="flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:opacity-90 transition font-medium"
                                    >
                                        <span className="text-xl">‚ûï</span>
                                        Add Post
                                    </button>
                                    <button
                                        onClick={handleSignOut}
                                        className="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition font-medium"
                                    >
                                        Sign Out
                                    </button>
                                </div>
                            </div>

                            {/* Add Post Form */}
                            {showAddPost && (
                                <div className="bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-5 mb-4 border-2 border-purple-200">
                                    <h3 className="font-semibold mb-4 text-gray-800 text-lg">üìä Add New Post</h3>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-3 mb-3">
                                        <select
                                            value={newPost.platform}
                                            onChange={(e) => setNewPost({...newPost, platform: e.target.value})}
                                            className="px-4 py-2 border-2 border-purple-200 rounded-lg focus:border-purple-400 outline-none"
                                        >
                                            <option value="instagram">üì∑ Instagram</option>
                                            <option value="tiktok">üéµ TikTok</option>
                                            <option value="facebook">üë• Facebook</option>
                                            <option value="twitter">üê¶ Twitter/X</option>
                                        </select>
                                        <input
                                            type="text"
                                            placeholder="Post title (required)"
                                            value={newPost.title}
                                            onChange={(e) => setNewPost({...newPost, title: e.target.value})}
                                            className="px-4 py-2 border-2 border-purple-200 rounded-lg focus:border-purple-400 outline-none"
                                        />
                                        <input
                                            type="text"
                                            placeholder="Post URL (optional)"
                                            value={newPost.url}
                                            onChange={(e) => setNewPost({...newPost, url: e.target.value})}
                                            className="px-4 py-2 border-2 border-purple-200 rounded-lg focus:border-purple-400 outline-none"
                                        />
                                        <input
                                            type="text"
                                            placeholder="Hashtags (comma separated)"
                                            value={newPost.hashtags}
                                            onChange={(e) => setNewPost({...newPost, hashtags: e.target.value})}
                                            className="px-4 py-2 border-2 border-purple-200 rounded-lg focus:border-purple-400 outline-none"
                                        />
                                    </div>
                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-3 mb-4">
                                        <input
                                            type="number"
                                            placeholder="Views (required)"
                                            value={newPost.views}
                                            onChange={(e) => setNewPost({...newPost, views: e.target.value})}
                                            className="px-4 py-2 border-2 border-purple-200 rounded-lg focus:border-purple-400 outline-none"
                                        />
                                        <input
                                            type="number"
                                            placeholder="Likes"
                                            value={newPost.likes}
                                            onChange={(e) => setNewPost({...newPost, likes: e.target.value})}
                                            className="px-4 py-2 border-2 border-purple-200 rounded-lg focus:border-purple-400 outline-none"
                                        />
                                        <input
                                            type="number"
                                            placeholder="Comments"
                                            value={newPost.comments}
                                            onChange={(e) => setNewPost({...newPost, comments: e.target.value})}
                                            className="px-4 py-2 border-2 border-purple-200 rounded-lg focus:border-purple-400 outline-none"
                                        />
                                        <input
                                            type="number"
                                            placeholder="Shares"
                                            value={newPost.shares}
                                            onChange={(e) => setNewPost({...newPost, shares: e.target.value})}
                                            className="px-4 py-2 border-2 border-purple-200 rounded-lg focus:border-purple-400 outline-none"
                                        />
                                    </div>
                                    <div className="flex gap-2">
                                        <button
                                            onClick={addNewPost}
                                            className="flex items-center gap-2 px-5 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:opacity-90 font-medium"
                                        >
                                            <span>üíæ</span>
                                            Save Post
                                        </button>
                                        <button
                                            onClick={() => setShowAddPost(false)}
                                            className="px-5 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"
                                        >
                                            Cancel
                                        </button>
                                    </div>
                                </div>
                            )}

                            {/* Overall Stats */}
                            <div className="grid grid-cols-2 md:grid-cols-5 gap-4">
                                <div className="bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-xl">
                                    <div className="flex items-center gap-2 text-blue-600 mb-1">
                                        <span className="text-lg">üëÅÔ∏è</span>
                                        <span className="text-sm font-medium">Total Views</span>
                                    </div>
                                    <p className="text-2xl font-bold text-gray-800">{totalMetrics.views.toLocaleString()}</p>
                                </div>
                                <div className="bg-gradient-to-br from-pink-50 to-pink-100 p-4 rounded-xl">
                                    <div className="flex items-center gap-2 text-pink-600 mb-1">
                                        <span className="text-lg">‚ù§Ô∏è</span>
                                        <span className="text-sm font-medium">Total Likes</span>
                                    </div>
                                    <p className="text-2xl font-bold text-gray-800">{totalMetrics.likes.toLocaleString()}</p>
                                </div>
                                <div className="bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-xl">
                                    <div className="flex items-center gap-2 text-purple-600 mb-1">
                                        <span className="text-lg">üí¨</span>
                                        <span className="text-sm font-medium">Comments</span>
                                    </div>
                                    <p className="text-2xl font-bold text-gray-800">{totalMetrics.comments.toLocaleString()}</p>
                                </div>
                                <div className="bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-xl">
                                    <div className="flex items-center gap-2 text-green-600 mb-1">
                                        <span className="text-lg">üîó</span>
                                        <span className="text-sm font-medium">Shares</span>
                                    </div>
                                    <p className="text-2xl font-bold text-gray-800">{totalMetrics.shares.toLocaleString()}</p>
                                </div>
                                <div className="bg-gradient-to-br from-orange-50 to-orange-100 p-4 rounded-xl">
                                    <div className="flex items-center gap-2 text-orange-600 mb-1">
                                        <span className="text-lg">üìà</span>
                                        <span className="text-sm font-medium">Engagement</span>
                                    </div>
                                    <p className="text-2xl font-bold text-gray-800">{avgEngagementRate}%</p>
                                </div>
                            </div>
                        </div>

                        {/* Two Column Layout */}
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            {/* Posts List */}
                            <div className="lg:col-span-2">
                                <h2 className="text-xl font-bold text-gray-800 mb-3">Your Posts ({posts.length})</h2>

                                {posts.length === 0 ? (
                                    <div className="bg-white rounded-xl shadow-md p-12 text-center">
                                        <p className="text-6xl mb-4">üì∑</p>
                                        <h3 className="text-lg font-semibold text-gray-800 mb-2">No posts yet</h3>
                                        <p className="text-gray-500 mb-4">Click "Add Post" to start tracking your social media analytics</p>
                                    </div>
                                ) : (
                                    <div className="space-y-4">
                                        {posts.map(post => {
                                            const engagementRate = post.metrics.views > 0
                                                ? ((post.metrics.likes + post.metrics.comments + post.metrics.shares) / post.metrics.views * 100).toFixed(2)
                                                : 0;

                                            return (
                                                <div key={post.id} className="bg-white rounded-xl shadow-md p-5 hover:shadow-lg transition">
                                                    <div className="flex justify-between items-start mb-3">
                                                        <div className="flex items-center gap-3">
                                                            <span className="text-3xl">
                                                                {post.platform === 'instagram' ? 'üì∑' :
                                                                 post.platform === 'tiktok' ? 'üéµ' :
                                                                 post.platform === 'facebook' ? 'üë•' : 'üê¶'}
                                                            </span>
                                                            <div>
                                                                <h3 className="font-semibold text-lg text-gray-800">{post.title}</h3>
                                                                <p className="text-xs text-gray-500">
                                                                    {new Date(post.timestamp).toLocaleDateString()} at {new Date(post.timestamp).toLocaleTimeString()}
                                                                </p>
                                                            </div>
                                                        </div>
                                                        <div className="flex items-center gap-2">
                                                            <div className="px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700">
                                                                üìà {engagementRate}%
                                                            </div>
                                                            <button
                                                                onClick={() => deletePost(post.id)}
                                                                className="text-red-600 hover:bg-red-50 p-2 rounded-lg transition"
                                                            >
                                                                üóëÔ∏è
                                                            </button>
                                                        </div>
                                                    </div>

                                                    <div className="grid grid-cols-4 gap-3 mb-3">
                                                        <div className="text-center">
                                                            <p className="text-xs text-gray-500">Views</p>
                                                            <p className="text-lg font-bold text-gray-800">{post.metrics.views.toLocaleString()}</p>
                                                        </div>
                                                        <div className="text-center">
                                                            <p className="text-xs text-gray-500">Likes</p>
                                                            <p className="text-lg font-bold text-pink-600">{post.metrics.likes.toLocaleString()}</p>
                                                        </div>
                                                        <div className="text-center">
                                                            <p className="text-xs text-gray-500">Comments</p>
                                                            <p className="text-lg font-bold text-blue-600">{post.metrics.comments.toLocaleString()}</p>
                                                        </div>
                                                        <div className="text-center">
                                                            <p className="text-xs text-gray-500">Shares</p>
                                                            <p className="text-lg font-bold text-green-600">{post.metrics.shares.toLocaleString()}</p>
                                                        </div>
                                                    </div>

                                                    {post.hashtags && post.hashtags.length > 0 && (
                                                        <div className="flex flex-wrap gap-2">
                                                            {post.hashtags.map((tag, i) => (
                                                                <span key={i} className="text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full">
                                                                    {tag}
                                                                </span>
                                                            ))}
                                                        </div>
                                                    )}
                                                </div>
                                            );
                                        })}
                                    </div>
                                )}
                            </div>

                            {/* AI Suggestions Panel */}
                            <div className="lg:col-span-1">
                                <div className="bg-white rounded-xl shadow-md p-5 sticky top-4">
                                    <div className="flex items-center justify-between mb-4">
                                        <h2 className="text-xl font-bold text-gray-800 flex items-center gap-2">
                                            <span>‚ú®</span>
                                            AI Insights
                                        </h2>
                                        <button
                                            onClick={generateAISuggestions}
                                            disabled={loadingSuggestions || posts.length === 0}
                                            className="px-3 py-1.5 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-sm rounded-lg hover:opacity-90 transition disabled:opacity-50 font-medium"
                                        >
                                            {loadingSuggestions ? 'Analyzing...' : 'Generate'}
                                        </button>
                                    </div>

                                    {loadingSuggestions && (
                                        <div className="flex items-center justify-center py-8">
                                            <div className="animate-spin rounded-full h-10 w-10 border-b-2 border-purple-500"></div>
                                        </div>
                                    )}

                                    {!loadingSuggestions && aiSuggestions.length === 0 && (
                                        <div className="text-center py-8 text-gray-500">
                                            <p className="text-4xl mb-2">‚ú®</p>
                                            <p className="text-sm">
                                                {posts.length === 0
                                                    ? 'Add some posts first, then generate AI insights'
                                                    : 'Click Generate to get AI-powered suggestions'}
                                            </p>
                                        </div>
                                    )}

                                    {!loadingSuggestions && aiSuggestions.length > 0 && (
                                        <div className="space-y-3">
                                            {aiSuggestions.map((item, i) => (
                                                <div key={i} className="bg-gradient-to-br from-gray-50 to-white p-4 rounded-lg border border-gray-100">
                                                    <div className="inline-block px-2 py-1 rounded-full text-xs font-medium mb-2 bg-purple-100 text-purple-700">
                                                        {item.category}
                                                    </div>
                                                    <p className="text-sm text-gray-700 leading-relaxed">{item.suggestion}</p>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
